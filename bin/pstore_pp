#!/usr/bin/env ruby

require 'bundler/setup'
require 'pstore_pp'
require 'optparse'

begin
  OptionParser.new do |opts|
    opts.banner = <<-END.gsub(/^ {4}/, '')
    #{opts.program_name} - Pretty-prints the contents of PStore files as JSON.

    Usage: #{opts.program_name} FILE [FILES...]
    END
    opts.version = PStorePP::VERSION
  end.parse!

  PStorePP::CLI.start
rescue => e
  STDERR.puts "Error - #{e.message}"
  exit 1
end
